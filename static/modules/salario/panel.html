<!--DATA TABLE-->
<link href="{url_static}vendors/datatables.net-bs/css/dataTables.bootstrap.min.css" rel="stylesheet">
<link href="{url_static}vendors/datatables.net-responsive-bs/css/responsive.bootstrap.min.css" rel="stylesheet">
<!--DATA TABLE-->
<div class="col-lg-12">
    <ul class="breadcrumb">
        <li><a href="{url_app}/reporte/{panel_general}"><i class="fa fa-home"></i> HOME</a></li>
        <li><a href="{url_app}/{objeto}/listar">Panel Salarios</a></li>
    </ul>
</div>
<div class="col-lg-12" style="padding-left: 0px; padding-right: 0px; margin-bottom: 2%;">
    <div class="col-md-4 col-sm-4 col-xs-4">
        <div class="x_panel">
            <div class="x_title">
                <h2><i class="fa fa-plus-square"></i>&nbsp;&nbsp; Agregar salario</h2>
                <ul class="nav navbar-right panel_toolbox">
                    <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
                    <li><a class="close-link"><i class="fa fa-close"></i></a></li>
                </ul>
                <div class="clearfix"></div>
            </div>
            <div class="x_content">
                <div class=" form">
                    <form class="form" id="formulario_guardar" method="post" action="{url_app}/salario/guardar">
                        <div class="form-group col-lg-6">
                            <label>Desde</label>
                            <input type="date" class="form-control" id="desde" name="desde" required>
                        </div>
                        <div class="form-group col-lg-6">
                            <label>Hasta</label>
                            <input type="date" class="form-control" id="hasta" name="hasta" required>
                        </div>
                        <div class="form-group col-lg-12">
                            <label>Detalle</label>
                            <input type="text" class="form-control" id="detalle" name="detalle" required>
                        </div>
                        <div class="form-group col-lg-12">
                            <label>Monto</label>
                            <input type="text" class="form-control" id="monto" name="monto" required>
                        </div>
                        <div class="form-group col-lg-12">
                            <label>Empleado</label>
                            <select class="form-control m-bot15" name="empleado" id="empleado" required>
                              <option value="">Seleccionar Empleado</option>
                              {slt_empleado}
                            </select>
                        </div>
                        <div class="form-group col-lg-12">
                            <label>Tipo Pago</label>
                            <select class="form-control m-bot15" name="tipo_pago" id="tipo_pago" required>
                              <option value="SALARIO">SALARIO</option>
                              <option value="ADELANTO">ADELANTO</option>
                            </select>
                        </div>
                        <div class="col-lg-12" style="margin-top: 2%;" align="right">
                            <a href="#" class="btn btn-app" onclick="confirma_formulario(1, '')"> <i class="fa fa-save"></i> Agregar </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-8 col-sm-8 col-xs-8">
        <div class="x_panel">
            <div class="x_title">
                <h2><i class="fa fa-table"></i>&nbsp;&nbsp; Listado de salarios abonados en el mes</h2>
                <ul class="nav navbar-right panel_toolbox">
                    <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
                    <li><a class="close-link"><i class="fa fa-close"></i></a></li>
                </ul>
                <div class="clearfix"></div>
            </div>
            <div class="x_content">
                <table id="tbl_salario" class="table table-striped table-bordered">
                    <thead>
                        <tr style="font-size: 12px;">
                            <th>Fecha Pago</th>
                            <th>Per√≠odo</th>
                            <th>Detalle</th>
                            <th>Tipo</th>
                            <th>Personal</th>
                            <th>Usuario</th>
                            <th>Monto</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        {tbl_salario}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<div class="col-lg-12" style="padding-left: 0px; padding-right: 0px; margin-bottom: 2%;">
    <div class="col-md-4 col-sm-4 col-xs-4">
        <div class="x_panel">
            <div class="x_title">
                <h2><i class="fa fa-plus-square"></i>&nbsp;&nbsp; Buscar salario</h2>
                <ul class="nav navbar-right panel_toolbox">
                    <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
                    <li><a class="close-link"><i class="fa fa-close"></i></a></li>
                </ul>
                <div class="clearfix"></div>
            </div>
            <div class="x_content">
                <div class=" form">
                    <form class="form" id="formulario" method="post" action="{url_app}/salario/filtrar_salario">
                        <div class="form-group">
                            <label>Desde</label>
                            <input type="date" class="form-control" id="filtro_desde" name="desde" required>
                        </div>
                        <div class="form-group">
                            <label>Hasta</label>
                            <input type="date" class="form-control" id="filtro_hasta" name="hasta" required>
                        </div>
                        <div class="form-group">
                            <label>Empleado</label>
                            <select class="form-control m-bot15" name="id_empleado" id="id_empleado" required>
                              <option value="">Seleccionar Empleado</option>
                              {slt_empleado}
                            </select>
                        </div>
                        <div class="col-lg-12" style="margin-top: 2%;" align="right">
                            <button class="btn btn-xs btn-primary" type="button" onclick="filtrarSalario();" style="width: 100%"> <i class="fa fa-search"></i> Buscar </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-8 col-sm-8 col-xs-8" id='resultado' style="display:none;"></div>
</div>
<!-- Datatables -->
<script src="{url_static}vendors/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="{url_static}vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
<script src="{url_static}vendors/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
<script src="{url_static}vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js"></script>
<script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
        $('#tbl_salario').dataTable( {
            "aaSorting": [[ 0, "asc" ]]
          , "iDisplayLength":10
        } );
    } );

    function filtrarSalario(){
        var desde = document.getElementById("filtro_desde").value;
        var hasta = document.getElementById("filtro_hasta").value;
        var empleado = document.getElementById("id_empleado").value;

        $.ajax({
            url: '{url_app}/salario/filtrar_salario',
            type: 'POST',
            async: false,
            data: {desde: desde,hasta: hasta,empleado: empleado},
            success: function (result) {
                document.getElementById('resultado').style.display = 'block';
                document.getElementById('resultado').innerHTML = result;
                $(document).ready(function() {
                    $('#tbl_filtro').dataTable( {
                        "aaSorting": [[ 0, "asc" ]]
                    ,     "iDisplayLength":10
                    } );
                } );
            }
        });
    }
</script>